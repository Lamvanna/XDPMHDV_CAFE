<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hồ Sơ Người Dùng | Coffee House</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/transitions.css">
    <link rel="stylesheet" href="assets/css/profile.css">
    <style>
        /* Main content spacing for fixed header */
        main {
            padding-top: 100px;
        }

        /* Sidebar sticky positioning */
        .sidebar-sticky {
            position: sticky;
            top: 100px;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .sidebar-sticky::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar-sticky::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .sidebar-sticky::-webkit-scrollbar-thumb {
            background: #6F4E37;
            border-radius: 10px;
        }

        .sidebar-sticky::-webkit-scrollbar-thumb:hover {
            background: #5D3E2A;
        }

        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* Modal backdrop and positioning */
        #contactDetailModal,
        #newContactModal {
            display: none;
        }

        #contactDetailModal.flex,
        #newContactModal.flex {
            display: flex !important;
        }

        /* Contact card hover effects */
        #contactsList>div {
            animation: fadeIn 0.3s ease-out;
            transition: all 0.3s ease;
        }

        #contactsList>div:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Smooth animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Chat bubble animations - slide from respective sides */
        #contactReplies>div:not(.text-center) {
            animation: slideIn 0.4s ease-out;
        }

        /* Admin messages slide from left */
        #contactReplies>div:not(.flex-row-reverse):not(.text-center) {
            animation: slideInLeft 0.4s ease-out;
        }

        /* User messages slide from right */
        #contactReplies>div.flex-row-reverse {
            animation: slideInRight 0.4s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Scrollbar styling */
        .overflow-y-auto::-webkit-scrollbar {
            width: 8px;
        }

        .overflow-y-auto::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #6F4E37;
            border-radius: 10px;
        }

        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #5D3E2A;
        }

        /* Pulse animation for new replies badge */
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {

            #contactDetailModal .bg-white,
            #newContactModal .bg-white {
                max-height: 95vh;
            }

            #contactDetailModal .p-6,
            #newContactModal .p-6 {
                padding: 1rem;
            }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'coffee': '#6F4E37',
                        'cream': '#F9F4EE',
                        'coffee-light': '#8B6F47',
                        'coffee-dark': '#5D3E2A'
                    },
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>

<body class="font-poppins bg-cream">
    <!-- Header (Fixed) -->
    <header class="bg-white shadow-lg fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <a href="index.html"
                    class="flex items-center space-x-3 cursor-pointer hover:opacity-80 transition-opacity">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 bg-coffee rounded-full flex items-center justify-center overflow-hidden shop-logo-container">
                        <i class="fas fa-coffee text-white text-lg sm:text-xl shop-logo-icon"></i>
                        <img src="" alt="Logo" class="shop-logo w-full h-full object-cover hidden">
                    </div>
                    <div>
                        <h1 class="text-xl sm:text-2xl font-bold text-coffee shop-name">Coffee House</h1>
                        <p class="text-xs text-gray-600 hidden sm:block shop-description">Premium Coffee Experience</p>
                    </div>
                </a>

                <!-- Navigation Menu -->
                <nav class="hidden lg:flex items-center space-x-8">
                    <a href="index.html" class="nav-link text-gray-700 hover:text-coffee transition-colors">Trang
                        chủ</a>
                    <a href="menu.html" class="nav-link text-gray-700 hover:text-coffee transition-colors">Menu</a>
                    <a href="reservation.html" class="nav-link text-gray-700 hover:text-coffee transition-colors">Đặt
                        bàn</a>
                    <a href="promotion.html" class="nav-link text-gray-700 hover:text-coffee transition-colors">Khuyến
                        mãi</a>
                    <a href="contact.html" class="nav-link text-gray-700 hover:text-coffee transition-colors">Liên
                        hệ</a>
                </nav>

                <!-- Search Bar -->
                <div class="hidden md:flex items-center bg-gray-100 rounded-full px-4 py-2 max-w-xs">
                    <i class="fas fa-search text-gray-400 mr-2"></i>
                    <input type="text" placeholder="Tìm kiếm món..." class="bg-transparent outline-none text-sm flex-1">
                </div>

                <!-- Actions -->
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <!-- Cart -->
                    <div class="relative">
                        <a href="cart.html"
                            class="p-2 bg-coffee text-white rounded-full hover:bg-coffee-dark transition-colors inline-block">
                            <i class="fas fa-shopping-cart text-sm sm:text-base"></i>
                        </a>
                        <span
                            class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"
                            id="cartCount">0</span>
                    </div>

                    <!-- User Menu / Login Button -->
                    <div class="relative user-menu">
                        <!-- Login Button (shown when not logged in) -->
                        <a href="login.html" id="loginBtn" data-no-transition
                            class="bg-coffee text-white px-3 py-2 sm:px-4 sm:py-2 rounded-full hover:bg-coffee-dark transition-colors text-sm inline-flex items-center">
                            <i class="fas fa-user mr-1 sm:mr-2"></i>
                            <span class="hidden sm:inline">Đăng nhập</span>
                        </a>

                        <!-- User Button (shown when logged in) -->
                        <button onclick="toggleUserMenu()" id="userBtn"
                            class="hidden bg-coffee text-white px-3 py-2 sm:px-4 sm:py-2 rounded-full hover:bg-coffee-dark transition-colors text-sm items-center">
                            <i class="fas fa-user mr-1 sm:mr-2"></i>
                            <span id="userName">Tài khoản</span>
                            <i class="fas fa-chevron-down ml-2 text-xs"></i>
                        </button>

                        <!-- Dropdown Menu -->
                        <div id="userDropdown"
                            class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50">
                            <a href="profile.html"
                                class="block px-4 py-2 text-gray-700 hover:bg-coffee hover:text-white transition-colors">
                                <i class="fas fa-user-circle mr-2"></i>Hồ sơ
                            </a>
                            <a href="my-orders.html"
                                class="block px-4 py-2 text-gray-700 hover:bg-coffee hover:text-white transition-colors">
                                <i class="fas fa-shopping-bag mr-2"></i>Đơn hàng
                            </a>
                            <a href="reservation-history.html"
                                class="block px-4 py-2 text-gray-700 hover:bg-coffee hover:text-white transition-colors">
                                <i class="fas fa-history mr-2"></i>Lịch sử đặt bàn
                            </a>
                            <hr class="my-2">
                            <a href="#" onclick="logout(); return false;"
                                class="block px-4 py-2 text-red-600 hover:bg-red-50 transition-colors">
                                <i class="fas fa-sign-out-alt mr-2"></i>Đăng xuất
                            </a>
                        </div>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button class="lg:hidden p-2" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-coffee text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="lg:hidden bg-white border-t border-gray-200 hidden">
            <nav class="container mx-auto px-4 py-4 space-y-3">
                <a href="index.html" class="block text-gray-700 hover:text-coffee">Trang chủ</a>
                <a href="menu.html" class="block text-gray-700 hover:text-coffee">Menu</a>
                <a href="reservation.html" class="block text-gray-700 hover:text-coffee">Đặt bàn</a>
                <a href="promotion.html" class="block text-gray-700 hover:text-coffee">Khuyến mãi</a>
                <a href="contact.html" class="block text-gray-700 hover:text-coffee">Liên hệ</a>
                <div class="pt-3 border-t border-gray-200">
                    <a href="profile.html" class="block text-gray-700 hover:text-coffee py-2">
                        <i class="fas fa-user-circle mr-2"></i>Hồ sơ
                    </a>
                    <a href="my-orders.html" class="block text-gray-700 hover:text-coffee py-2">
                        <i class="fas fa-shopping-bag mr-2"></i>Đơn hàng của tôi
                    </a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pb-16 pt-20">
        <div class="container mx-auto px-4 max-w-7xl">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Sidebar -->
                <aside class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden sidebar-sticky">
                        <!-- Avatar Section -->
                        <div class="bg-gradient-to-br from-coffee to-coffee-dark p-6 text-center">
                            <div class="relative inline-block">
                                <img id="userAvatar"
                                    src="https://ui-avatars.com/api/?name=User&background=6F4E37&color=fff" alt="Avatar"
                                    class="w-24 h-24 rounded-full border-4 border-white shadow-lg object-cover">
                                <button onclick="changeAvatar()"
                                    class="absolute bottom-0 right-0 bg-white text-coffee p-2 rounded-full shadow-lg hover:bg-cream transition-colors">
                                    <i class="fas fa-camera text-sm"></i>
                                </button>
                                <input type="file" id="avatarInput" accept="image/*" class="hidden">
                            </div>
                            <h3 id="sidebarUserName" class="text-white font-bold text-lg mt-4">Đang tải...</h3>
                            <p id="sidebarMemberType" class="text-cream text-sm">Khách hàng thân thiết</p>
                            <div class="flex justify-center mt-2" id="sidebarVipStars">
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                            </div>
                        </div>

                        <!-- Menu -->
                        <nav class="p-4">
                            <a href="#profile" onclick="showSection('profile')"
                                class="menu-item active flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-user text-coffee"></i>
                                <span>Thông tin cá nhân</span>
                            </a>
                            <a href="my-orders.html"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-shopping-bag text-coffee"></i>
                                <span>Đơn hàng của tôi</span>
                            </a>
                            <a href="reservation-history.html"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-calendar-check text-coffee"></i>
                                <span>Lịch sử đặt bàn</span>
                            </a>
                            <a href="#contacts" onclick="showSection('contacts')"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-comments text-coffee"></i>
                                <span>Tin nhắn liên hệ</span>
                            </a>
                            <a href="#favorites"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-heart text-coffee"></i>
                                <span>Món yêu thích</span>
                            </a>
                            <a href="#points"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-gift text-coffee"></i>
                                <span>Điểm thưởng</span>
                            </a>
                            <a href="#settings" onclick="showSection('settings')"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-cream transition-colors mb-2">
                                <i class="fas fa-cog text-coffee"></i>
                                <span>Cài đặt</span>
                            </a>
                            <a href="#" onclick="logout(); return false;"
                                class="menu-item flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-red-50 text-red-600 transition-colors">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Đăng xuất</span>
                            </a>
                        </nav>

                        <!-- Stats -->
                        <div class="p-4 border-t border-gray-200">
                            <h4 class="font-semibold text-coffee mb-3">Thống kê</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Đơn hàng</span>
                                    <span id="statOrders" class="font-bold text-coffee">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Đặt bàn</span>
                                    <span id="statReservations" class="font-bold text-coffee">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Điểm thưởng</span>
                                    <span id="statPoints" class="font-bold text-coffee">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Content Area -->
                <div class="lg:col-span-3">
                    <!-- Profile Info Section -->
                    <div id="profileSection" class="content-section">
                        <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h2 class="text-2xl font-bold text-coffee">Thông Tin Cá Nhân</h2>
                                <div class="flex items-center space-x-2 text-green-600">
                                    <i class="fas fa-check-circle"></i>
                                    <span class="text-sm font-semibold">Đã xác thực</span>
                                </div>
                            </div>

                            <form id="profileForm" class="space-y-6">
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-user text-coffee mr-2"></i>Họ và tên
                                    </label>
                                    <input type="text" id="profileName" disabled
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all bg-gray-50"
                                        placeholder="Nguyễn Văn A">
                                </div>

                                <!-- Email -->
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-envelope text-coffee mr-2"></i>Email
                                    </label>
                                    <input type="email" id="profileEmail" disabled
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all bg-gray-50"
                                        placeholder="email@example.com">
                                </div>

                                <!-- Phone -->
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-phone text-coffee mr-2"></i>Số điện thoại
                                    </label>
                                    <input type="tel" id="profilePhone" disabled
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all bg-gray-50"
                                        placeholder="0123456789">
                                </div>

                                <!-- Date of Birth -->
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-birthday-cake text-coffee mr-2"></i>Ngày sinh
                                    </label>
                                    <input type="date" id="profileBirthday" disabled
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all bg-gray-50">
                                </div>

                                <!-- Gender -->
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-venus-mars text-coffee mr-2"></i>Giới tính
                                    </label>
                                    <div class="flex items-center space-x-6">
                                        <label class="flex items-center">
                                            <input type="radio" name="gender" value="male" disabled class="mr-2">
                                            <span>Nam</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="gender" value="female" disabled class="mr-2">
                                            <span>Nữ</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="gender" value="other" disabled class="mr-2">
                                            <span>Khác</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Address -->
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-map-marker-alt text-coffee mr-2"></i>Địa chỉ
                                    </label>
                                    <textarea id="profileAddress" disabled rows="3"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all bg-gray-50"
                                        placeholder="Số nhà, tên đường, phường/xã, quận/huyện, tỉnh/thành phố"></textarea>
                                </div>

                                <!-- Favorite Drink -->
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">
                                        <i class="fas fa-coffee text-coffee mr-2"></i>Sở thích đồ uống
                                    </label>
                                    <input type="text" id="favoriteDrink"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all"
                                        placeholder="Cappuccino, Latte, ...">
                                </div>

                                <!-- Notification Settings -->
                                <div class="border-t border-gray-200 pt-6">
                                    <h3 class="text-lg font-semibold text-coffee mb-4">
                                        <i class="fas fa-bell mr-2"></i>Tùy chọn thông báo
                                    </h3>

                                    <div class="space-y-4">
                                        <!-- Email Notifications -->
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-semibold text-gray-700">Email khuyến mãi</p>
                                                <p class="text-sm text-gray-500">Nhận thông báo về ưu đãi qua email</p>
                                            </div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="emailNotifications" checked>
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>

                                        <!-- SMS Notifications -->
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-semibold text-gray-700">SMS thông báo đơn hàng</p>
                                                <p class="text-sm text-gray-500">Nhận SMS về trạng thái đơn hàng</p>
                                            </div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="smsNotifications" checked>
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>

                                        <!-- Birthday Notifications -->
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-semibold text-gray-700">Thông báo sinh nhật</p>
                                                <p class="text-sm text-gray-500">Nhận quà tặng sinh nhật đặc biệt</p>
                                            </div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="birthdayNotifications" checked>
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="flex flex-col sm:flex-row gap-4 pt-6">
                                    <button type="button" id="editProfileBtn"
                                        class="flex-1 bg-coffee text-white py-3 rounded-lg font-semibold hover:bg-coffee-dark transition-colors">
                                        <i class="fas fa-edit mr-2"></i>Chỉnh sửa thông tin
                                    </button>
                                    <button type="button" id="saveProfileBtn"
                                        class="hidden flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors">
                                        <i class="fas fa-save mr-2"></i>Lưu thay đổi
                                    </button>
                                    <button type="button" id="cancelEditBtn"
                                        class="hidden flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors">
                                        <i class="fas fa-times mr-2"></i>Hủy
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Contacts Section -->
                    <div id="contactsSection" class="content-section hidden">
                        <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h2 class="text-2xl font-bold text-coffee">
                                    <i class="fas fa-comments mr-2"></i>Tin nhắn liên hệ
                                </h2>
                                <button onclick="openNewContactModal()"
                                    class="bg-coffee text-white px-4 py-2 rounded-lg hover:bg-coffee-dark transition-colors text-sm">
                                    <i class="fas fa-plus mr-2"></i>Gửi tin nhắn mới
                                </button>
                            </div>

                            <!-- Loading State -->
                            <div id="contactsLoading" class="text-center py-12">
                                <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-coffee">
                                </div>
                                <p class="text-gray-600 mt-4">Đang tải tin nhắn...</p>
                            </div>

                            <!-- Empty State -->
                            <div id="contactsEmpty" class="hidden text-center py-12">
                                <i class="fas fa-inbox text-6xl text-gray-300 mb-4"></i>
                                <p class="text-gray-600 text-lg mb-4">Bạn chưa có tin nhắn nào</p>
                                <button onclick="openNewContactModal()"
                                    class="bg-coffee text-white px-6 py-3 rounded-lg hover:bg-coffee-dark transition-colors">
                                    <i class="fas fa-paper-plane mr-2"></i>Gửi tin nhắn đầu tiên
                                </button>
                            </div>

                            <!-- Contacts List -->
                            <div id="contactsList" class="hidden space-y-4"></div>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div id="settingsSection" class="content-section hidden">
                        <div class="space-y-6">
                            <!-- Change Password Card -->
                            <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">
                                <h2 class="text-2xl font-bold text-coffee mb-6">
                                    <i class="fas fa-lock mr-2"></i>Đổi Mật Khẩu
                                </h2>

                                <form id="changePasswordForm" class="space-y-6">
                                    <!-- Current Password -->
                                    <div>
                                        <label class="block text-gray-700 font-semibold mb-2">
                                            <i class="fas fa-key text-coffee mr-2"></i>Mật khẩu hiện tại
                                        </label>
                                        <div class="relative">
                                            <input type="password" id="currentPassword" required
                                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all"
                                                placeholder="••••••••">
                                            <button type="button" onclick="togglePassword('currentPassword')"
                                                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-coffee">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- New Password -->
                                    <div>
                                        <label class="block text-gray-700 font-semibold mb-2">
                                            <i class="fas fa-lock text-coffee mr-2"></i>Mật khẩu mới
                                        </label>
                                        <div class="relative">
                                            <input type="password" id="newPassword" required minlength="6"
                                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all"
                                                placeholder="••••••••">
                                            <button type="button" onclick="togglePassword('newPassword')"
                                                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-coffee">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <p class="text-sm text-gray-500 mt-1">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            Mật khẩu phải có ít nhất 6 ký tự
                                        </p>
                                    </div>

                                    <!-- Confirm Password -->
                                    <div>
                                        <label class="block text-gray-700 font-semibold mb-2">
                                            <i class="fas fa-lock text-coffee mr-2"></i>Xác nhận mật khẩu mới
                                        </label>
                                        <div class="relative">
                                            <input type="password" id="confirmPassword" required minlength="6"
                                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all"
                                                placeholder="••••••••">
                                            <button type="button" onclick="togglePassword('confirmPassword')"
                                                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-coffee">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Password Strength Indicator -->
                                    <div id="passwordStrength" class="hidden">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm font-semibold text-gray-700">Độ mạnh mật khẩu:</span>
                                            <span id="strengthText" class="text-sm font-bold"></span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div id="strengthBar" class="h-2 rounded-full transition-all duration-300">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Submit Button -->
                                    <div class="pt-4">
                                        <button type="submit"
                                            class="w-full bg-coffee text-white py-3 rounded-lg font-semibold hover:bg-coffee-dark transition-colors shadow-lg hover:shadow-xl">
                                            <i class="fas fa-check mr-2"></i>Đổi mật khẩu
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Notification Settings Card -->
                            <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">
                                <h2 class="text-2xl font-bold text-coffee mb-6">
                                    <i class="fas fa-bell mr-2"></i>Cài Đặt Thông Báo
                                </h2>

                                <div class="space-y-4">
                                    <!-- Email Notifications -->
                                    <div
                                        class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-envelope text-coffee mr-2"></i>Thông báo qua Email
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Nhận thông báo về đơn hàng và khuyến
                                                mãi qua email</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="emailNotif" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-coffee/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-coffee">
                                            </div>
                                        </label>
                                    </div>

                                    <!-- Order Updates -->
                                    <div
                                        class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-shopping-bag text-coffee mr-2"></i>Cập nhật đơn hàng
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Thông báo khi đơn hàng có thay đổi
                                                trạng thái</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="orderNotif" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-coffee/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-coffee">
                                            </div>
                                        </label>
                                    </div>

                                    <!-- Promotion Notifications -->
                                    <div
                                        class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-gift text-coffee mr-2"></i>Khuyến mãi & Ưu đãi
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Nhận thông báo về các chương trình
                                                khuyến mãi mới</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="promoNotif" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-coffee/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-coffee">
                                            </div>
                                        </label>
                                    </div>

                                    <!-- Reservation Reminders -->
                                    <div
                                        class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-calendar-check text-coffee mr-2"></i>Nhắc nhở đặt bàn
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Nhận nhắc nhở trước giờ đặt bàn 1
                                                tiếng</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="reservationNotif" class="sr-only peer" checked>
                                            <div
                                                class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-coffee/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-coffee">
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <button onclick="saveNotificationSettings()"
                                    class="mt-6 w-full bg-coffee text-white py-3 rounded-lg font-semibold hover:bg-coffee-dark transition-colors shadow-lg hover:shadow-xl">
                                    <i class="fas fa-save mr-2"></i>Lưu cài đặt
                                </button>
                            </div>

                            <!-- Privacy & Security Card -->
                            <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">
                                <h2 class="text-2xl font-bold text-coffee mb-6">
                                    <i class="fas fa-shield-alt mr-2"></i>Bảo Mật & Quyền Riêng Tư
                                </h2>

                                <div class="space-y-4">
                                    <!-- Two-Factor Authentication -->
                                    <div
                                        class="flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-coffee transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-lock text-coffee mr-2"></i>Xác thực 2 yếu tố (2FA)
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Bảo vệ tài khoản với lớp bảo mật thứ
                                                hai</p>
                                        </div>
                                        <button onclick="setup2FA()"
                                            class="px-4 py-2 bg-coffee text-white rounded-lg hover:bg-coffee-dark transition-colors text-sm font-semibold">
                                            Bật ngay
                                        </button>
                                    </div>

                                    <!-- Login Activity -->
                                    <div
                                        class="flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-coffee transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-history text-coffee mr-2"></i>Lịch sử đăng nhập
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Xem các lần đăng nhập gần đây vào tài
                                                khoản</p>
                                        </div>
                                        <button onclick="viewLoginHistory()"
                                            class="px-4 py-2 border-2 border-coffee text-coffee rounded-lg hover:bg-coffee hover:text-white transition-colors text-sm font-semibold">
                                            Xem
                                        </button>
                                    </div>

                                    <!-- Data Download -->
                                    <div
                                        class="flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-coffee transition-colors">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-800">
                                                <i class="fas fa-download text-coffee mr-2"></i>Tải dữ liệu cá nhân
                                            </h3>
                                            <p class="text-sm text-gray-600 mt-1">Tải xuống bản sao dữ liệu cá nhân của
                                                bạn</p>
                                        </div>
                                        <button onclick="downloadData()"
                                            class="px-4 py-2 border-2 border-coffee text-coffee rounded-lg hover:bg-coffee hover:text-white transition-colors text-sm font-semibold">
                                            Tải về
                                        </button>
                                    </div>

                                    <!-- Delete Account -->
                                    <div
                                        class="flex items-center justify-between p-4 border-2 border-red-200 rounded-lg hover:border-red-500 transition-colors bg-red-50">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-red-700">
                                                <i class="fas fa-trash-alt mr-2"></i>Xóa tài khoản
                                            </h3>
                                            <p class="text-sm text-red-600 mt-1">Xóa vĩnh viễn tài khoản và toàn bộ dữ
                                                liệu</p>
                                        </div>
                                        <button onclick="deleteAccount()"
                                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-semibold">
                                            Xóa
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Display Preferences Card -->
                            <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">
                                <h2 class="text-2xl font-bold text-coffee mb-6">
                                    <i class="fas fa-palette mr-2"></i>Tùy Chỉnh Hiển Thị
                                </h2>

                                <div class="space-y-4">
                                    <!-- Language -->
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <label class="block font-semibold text-gray-800 mb-3">
                                            <i class="fas fa-language text-coffee mr-2"></i>Ngôn ngữ
                                        </label>
                                        <select id="languageSelect"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all">
                                            <option value="vi" selected>Tiếng Việt</option>
                                            <option value="en">English</option>
                                        </select>
                                    </div>

                                    <!-- Currency -->
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <label class="block font-semibold text-gray-800 mb-3">
                                            <i class="fas fa-money-bill-wave text-coffee mr-2"></i>Đơn vị tiền tệ
                                        </label>
                                        <select id="currencySelect"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all">
                                            <option value="VND" selected>VND (₫)</option>
                                            <option value="USD">USD ($)</option>
                                        </select>
                                    </div>

                                    <!-- Theme -->
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <label class="block font-semibold text-gray-800 mb-3">
                                            <i class="fas fa-moon text-coffee mr-2"></i>Chế độ giao diện
                                        </label>
                                        <div class="grid grid-cols-2 gap-4">
                                            <button onclick="setTheme('light')"
                                                class="theme-btn active p-4 border-2 border-coffee bg-white rounded-lg hover:bg-cream transition-colors">
                                                <i class="fas fa-sun text-2xl text-coffee mb-2"></i>
                                                <p class="font-semibold">Sáng</p>
                                            </button>
                                            <button onclick="setTheme('dark')"
                                                class="theme-btn p-4 border-2 border-gray-300 bg-gray-100 rounded-lg hover:border-coffee transition-colors">
                                                <i class="fas fa-moon text-2xl text-gray-600 mb-2"></i>
                                                <p class="font-semibold text-gray-700">Tối</p>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <button onclick="saveDisplaySettings()"
                                    class="mt-6 w-full bg-coffee text-white py-3 rounded-lg font-semibold hover:bg-coffee-dark transition-colors shadow-lg hover:shadow-xl">
                                    <i class="fas fa-save mr-2"></i>Lưu cài đặt
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Contact Detail Modal -->
    <div id="contactDetailModal" class="fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] flex flex-col overflow-hidden shadow-2xl">
            <!-- Modal Header -->
            <div class="bg-gradient-to-r from-coffee to-coffee-dark text-white p-4 sm:p-6 flex-shrink-0">
                <div class="flex items-center justify-between">
                    <div class="flex-1 min-w-0">
                        <h3 class="text-lg sm:text-2xl font-bold mb-1 truncate" id="modalContactSubject"></h3>
                        <p class="text-cream text-xs sm:text-sm" id="modalContactDate"></p>
                    </div>
                    <button onclick="closeContactDetailModal()"
                        class="ml-4 flex-shrink-0 text-white hover:text-cream transition-colors text-xl sm:text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Modal Body -->
            <div class="p-4 sm:p-6 overflow-y-auto flex-1">
                <!-- Original Message -->
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <div class="flex items-start space-x-3 sm:space-x-4">
                        <div
                            class="flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 bg-coffee rounded-full flex items-center justify-center text-white font-semibold text-sm sm:text-base">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="bg-cream rounded-2xl rounded-tl-none p-3 sm:p-4 shadow-sm">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-semibold text-coffee text-sm sm:text-base">Bạn</span>
                                    <span class="text-xs text-gray-500" id="originalMessageTime"></span>
                                </div>
                                <p class="text-gray-700 text-sm sm:text-base break-words" id="originalMessageContent">
                                </p>
                            </div>
                            <div class="mt-2 px-2 sm:px-4">
                                <span
                                    class="inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-semibold"
                                    id="contactStatusBadge"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Replies -->
                <div id="contactReplies" class="space-y-4 sm:space-y-6"></div>
            </div>

            <!-- Reply Input -->
            <div class="border-t border-gray-200 p-4 sm:p-6 bg-gray-50 flex-shrink-0">
                <form id="replyForm" class="space-y-3 sm:space-y-4">
                    <textarea id="replyMessage" rows="3" placeholder="Nhập tin nhắn của bạn..."
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all resize-none text-sm sm:text-base"></textarea>
                    <div class="flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3">
                        <button type="button" onclick="closeContactDetailModal()"
                            class="w-full sm:w-auto px-4 sm:px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm sm:text-base">
                            Đóng
                        </button>
                        <button type="submit"
                            class="w-full sm:w-auto px-4 sm:px-6 py-2 bg-coffee text-white rounded-lg hover:bg-coffee-dark transition-colors text-sm sm:text-base">
                            <i class="fas fa-paper-plane mr-2"></i>Gửi tin nhắn
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- New Contact Modal -->
    <div id="newContactModal" class="fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] flex flex-col overflow-hidden shadow-2xl">
            <!-- Modal Header -->
            <div class="bg-gradient-to-r from-coffee to-coffee-dark text-white p-4 sm:p-6 flex-shrink-0">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg sm:text-2xl font-bold">
                        <i class="fas fa-paper-plane mr-2"></i>Gửi tin nhắn mới
                    </h3>
                    <button onclick="closeNewContactModal()"
                        class="ml-4 flex-shrink-0 text-white hover:text-cream transition-colors text-xl sm:text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Modal Body -->
            <div class="p-4 sm:p-6 overflow-y-auto flex-1">
                <form id="newContactForm" class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2 text-sm sm:text-base">
                            <i class="fas fa-tag text-coffee mr-2"></i>Chủ đề
                        </label>
                        <input type="text" id="newContactSubject" required
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all text-sm sm:text-base"
                            placeholder="Vui lòng nhập chủ đề">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2 text-sm sm:text-base">
                            <i class="fas fa-comment text-coffee mr-2"></i>Nội dung
                        </label>
                        <textarea id="newContactMessage" rows="6" required
                            placeholder="Nhập nội dung tin nhắn của bạn..."
                            class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coffee transition-all resize-none text-sm sm:text-base"></textarea>
                    </div>

                    <div class="flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-2 sm:pt-4">
                        <button type="button" onclick="closeNewContactModal()"
                            class="w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm sm:text-base">
                            Hủy
                        </button>
                        <button type="submit"
                            class="w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-coffee text-white rounded-lg hover:bg-coffee-dark transition-colors text-sm sm:text-base">
                            <i class="fas fa-paper-plane mr-2"></i>Gửi tin nhắn
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-coffee-dark text-white py-12">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2024 Coffee House. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/cart-manager.js"></script>
    <script src="assets/js/auth-manager.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/api.js"></script>
    <script src="assets/js/settings-loader.js"></script>
    <script src="assets/js/profile.js"></script>
    <script src="assets/js/user-menu.js"></script>
</body>

</html>