<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Upload Logo</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-3xl font-bold mb-6">üß™ Test Upload Logo API</h1>
        
        <!-- Token Input -->
        <div class="mb-6">
            <label class="block font-semibold mb-2">Admin Token:</label>
            <input type="text" id="token" placeholder="Paste your admin token here"
                class="w-full px-4 py-2 border rounded-lg">
            <p class="text-sm text-gray-500 mt-1">
                L·∫•y t·ª´: localStorage.getItem('authToken') trong Console
            </p>
        </div>
        
        <!-- File Upload -->
        <div class="mb-6">
            <label class="block font-semibold mb-2">Ch·ªçn Logo:</label>
            <input type="file" id="logoFile" accept="image/*"
                class="w-full px-4 py-2 border rounded-lg">
        </div>
        
        <!-- Upload Button -->
        <button onclick="testUpload()" 
            class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg mb-4">
            üì§ Upload Logo
        </button>
        
        <!-- Result -->
        <div id="result" class="hidden p-4 rounded-lg mb-4"></div>
        
        <!-- Preview -->
        <div id="preview" class="hidden">
            <h3 class="font-semibold mb-2">Preview:</h3>
            <img id="previewImg" class="max-w-full h-auto border rounded-lg">
        </div>
    </div>
    
    <script>
        async function testUpload() {
            const token = document.getElementById('token').value;
            const fileInput = document.getElementById('logoFile');
            const file = fileInput.files[0];
            const resultDiv = document.getElementById('result');
            const previewDiv = document.getElementById('preview');
            const previewImg = document.getElementById('previewImg');
            
            // Validate
            if (!token) {
                showResult('‚ùå Vui l√≤ng nh·∫≠p token!', 'error');
                return;
            }
            
            if (!file) {
                showResult('‚ùå Vui l√≤ng ch·ªçn file!', 'error');
                return;
            }
            
            // Show loading
            showResult('‚è≥ ƒêang upload...', 'info');
            
            try {
                const formData = new FormData();
                formData.append('logo', file);
                
                const response = await fetch('http://localhost:3000/api/upload/logo', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showResult(`‚úÖ Upload th√†nh c√¥ng!<br>URL: ${data.logoUrl}`, 'success');
                    
                    // Show preview
                    previewImg.src = 'http://localhost:3000' + data.logoUrl;
                    previewDiv.classList.remove('hidden');
                } else {
                    showResult(`‚ùå L·ªói: ${data.error}`, 'error');
                }
            } catch (error) {
                showResult(`‚ùå L·ªói: ${error.message}`, 'error');
            }
        }
        
        function showResult(message, type) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = message;
            resultDiv.className = 'p-4 rounded-lg mb-4';
            
            if (type === 'success') {
                resultDiv.classList.add('bg-green-100', 'text-green-800');
            } else if (type === 'error') {
                resultDiv.classList.add('bg-red-100', 'text-red-800');
            } else {
                resultDiv.classList.add('bg-blue-100', 'text-blue-800');
            }
            
            resultDiv.classList.remove('hidden');
        }
    </script>
</body>
</html>
